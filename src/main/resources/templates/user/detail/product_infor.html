<style>
.btn-buy-now {
	background: linear-gradient(135deg, #ff416c, #ff4b2b) !important;
	/* Màu đỏ hồng mặc định */
	color: white !important;
	font-size: 16px !important;
	padding: 14px 28px !important;
	border: none !important;
	border-radius: 5px !important; /* Bo góc tròn đẹp */
	box-shadow: 0px 1px 5px rgba(255, 77, 77, 0.4) !important;
	cursor: pointer !important;
	position: relative !important;
	overflow: hidden !important;
	transition: all 0.4s ease-in-out !important;
}

.sold-quantity {
	transition: opacity 0.3s ease-in-out !important;
}

/* Ẩn .sold-quantity khi di chuột vào cả .thumb-description */
.thumb-description:hover .sold-quantity {
	opacity: 0 !important;
	visibility: hidden !important;
}

/* Khi đưa chuột vào, nút sẽ chuyển màu cam */
.btn-buy-now:hover {
	background: linear-gradient(135deg, #ff9a44, #ff6a00) !important;
	/* Màu cam */
	transform: scale(1.05) !important;
	box-shadow: 0px 1px 5px rgba(255, 140, 0, 0.6) !important;
}

/* Hiệu ứng bấm xuống */
.btn-buy-now:active {
	transform: scale(0.95) !important;
	box-shadow: 0px 3px 10px rgba(255, 140, 0, 0.3) !important;
}

.discount-percent {
	background-color: #ff6666 !important; /* Màu đỏ nhạt */
	color: white !important;
	font-weight: bold !important;
	padding: 4px 8px !important;
	border-radius: 5px !important;
	font-size: 13px !important;
	display: inline-block !important;
	margin-left: 8px !important;
}

.product-price {
	display: flex; /* Sắp xếp các phần tử theo chiều ngang */
	align-items: center; /* Căn giữa theo chiều dọc */
	gap: 10px; /* Tạo khoảng cách giữa các phần tử */
}

.pro_price {
	font-size: 20px;
	font-weight: bold;
	color: #f38c61; /* Màu đỏ nổi bật cho giá khuyến mãi */
}

.pro_oldprice {
	font-size: 16px;
	color: #999; /* Màu xám cho giá gốc */
	text-decoration: line-through;
}
</style>
<div id="content" class="col-sm-9" ng-app="favorite-app"
	ng-controller="favorite-ctrl">
	<div class="alert alert-success alert-dismissible"
		th:style="${infor}?'display: block;':'display: none;'">
		Thông báo: Bạn đã thêm mới <a
			th:href="@{|/san-pham/${inforProduct.Namesearch}|}">[[${inforProduct.name}]]</a>
		vào <a th:href="@{/shop/cart}">giỏ hàng</a> của bạn!
		<button type="button" class="close" data-dismiss="alert">×</button>
	</div>
	<div class="pro-deatil row">
		<div class="col-sm-6 product-img">
			<div class="thumbnails">
				<div class="pro-image">
					<a
						th:href="@{|/assets/images/imageProduct/${inforProduct.image1}|}"
						title="Microwaves" class="thumbnail"> <img
						th:src="@{|/assets/images/imageProduct/${inforProduct.image1}|}"
						title="Microwaves" id="zoom" alt="Microwaves"
						th:data-zoom-image="@{|/assets/images/imageProduct/${inforProduct.image1}|}" />
					</a>
				</div>

				<div class="product-additional">
					<div id="additional-carousel"
						class="owl-carousel owl-theme clearfix">
						<div class="image-additional">
							<a
								th:href="@{|/assets/images/imageProduct/${inforProduct.image1}|}"
								title="Microwaves" class="elevatezoom-gallery"
								th:data-image="@{|/assets/images/imageProduct/${inforProduct.image1}|}"
								th:data-zoom-image="@{|/assets/images/imageProduct/${inforProduct.image1}|}">
								<img
								th:src="@{|/assets/images/imageProduct/${inforProduct.image1}|}"
								title="Microwaves" alt="Microwaves" width="80" height="80" />
							</a>
						</div>
						<div class="image-additional">
							<a
								th:href="@{|/assets/images/imageProduct/${inforProduct.image2}|}"
								title="Microwaves" class="elevatezoom-gallery"
								th:data-image="@{|/assets/images/imageProduct/${inforProduct.image2}|}"
								th:data-zoom-image="@{|/assets/images/imageProduct/${inforProduct.image2}|}">
								<img
								th:src="@{|/assets/images/imageProduct/${inforProduct.image2}|}"
								title="Microwaves" alt="Microwaves" width="80" height="80" />
							</a>
						</div>
						<div class="image-additional">
							<a
								th:href="@{|/assets/images/imageProduct/${inforProduct.image3}|}"
								title="Microwaves" class="elevatezoom-gallery"
								th:data-image="@{|/assets/images/imageProduct/${inforProduct.image3}|}"
								th:data-zoom-image="@{|/assets/images/imageProduct/${inforProduct.image3}|}">
								<img
								th:src="@{|/assets/images/imageProduct/${inforProduct.image3}|}"
								title="Microwaves" alt="Microwaves" width="80" height="80" />
							</a>
						</div>
						<div class="image-additional">
							<a
								th:href="@{|/assets/images/imageProduct/${inforProduct.image4}|}"
								title="Microwaves" class="elevatezoom-gallery"
								th:data-image="@{|/assets/images/imageProduct/${inforProduct.image4}|}"
								th:data-zoom-image="@{|/assets/images/imageProduct/${inforProduct.image4}|}">
								<img
								th:src="@{|/assets/images/imageProduct/${inforProduct.image4}|}"
								title="Microwaves" alt="Microwaves" width="80" height="80" />
							</a>
						</div>
						<div class="image-additional">
							<a
								th:href="@{|/assets/images/imageProduct/${inforProduct.image5}|}"
								title="Microwaves" class="elevatezoom-gallery"
								th:data-image="@{|/assets/images/imageProduct/${inforProduct.image5}|}"
								th:data-zoom-image="@{|/assets/images/imageProduct/${inforProduct.image5}|}">
								<img
								th:src="@{|/assets/images/imageProduct/${inforProduct.image5}|}"
								title="Microwaves" alt="Microwaves" width="80" height="80" />
							</a>
						</div>
					</div>
				</div>
			</div>
		</div>
		<form th:action="@{|/san-pham/${inforProduct.Namesearch}|}"
			method="post">
			<div class="col-sm-6 right_info">
				<h1 class="">[[${inforProduct.name}]]</h1>
				<div class="rating clearfix">
					<div class="product-rating" style="margin-right: 5px !important;">
						<th:block th:if="${totalStar != 0}">
							<th:block th:each="i: ${#numbers.sequence(1, totalStar)}">
								<span class="fa fa-stack"><i
									class="fa fa-star fa-stack-1x"></i><i
									class="fa fa-star-o fa-stack-1x"></i></span>
							</th:block>
						</th:block>
						<th:block th:if="${totalStar != 5}">
							<th:block th:each="i: ${#numbers.sequence(1, 5 - totalStar)}">
								<span class="fa fa-stack"><i
									class="fa fa-star-o fa-stack-1x"></i></span>
							</th:block>
						</th:block>
						<!-- <span class="fa fa-stack"><i class="fa fa-star fa-stack-1x"></i><i
							class="fa fa-star-o fa-stack-1x"></i></span> 
						<span class="fa fa-stack"><i class="fa fa-star fa-stack-1x"></i><i
							class="fa fa-star-o fa-stack-1x"></i></span> 
						<span class="fa fa-stack"><i class="fa fa-star fa-stack-1x"></i><i
							class="fa fa-star-o fa-stack-1x"></i></span>  -->

					</div>
					<a href="" class="reviews"
						style="color: #ffb503; text-transform: lowercase;"
						onclick="$('a[href=\'#tab-review\']').trigger('click'); $('body,html').animate({scrollTop: $('.nav-tabs').offset().top}, 800); return false;">([[${countBookReviews}]]
						đánh giá)</a> <a href="" class="write-review"
						onclick="$('a[href=\'#tab-review\']').trigger('click'); $('body,html').animate({scrollTop: $('.nav-tabs').offset().top}, 800); return false;"><i
						class="fa fa-pencil" aria-hidden="true"></i>Viết đánh giá</a>
				</div>
				<hr>
				<ul class="list-unstyled">
					<li><span class="disc">Nhà xuất bản:</span> <a class="disc1"
						href="">[[${inforProduct.publisher.name}]]</a></li>
					<li><span class="disc">Mã sản phẩm:</span><span class="disc1">
							[[${inforProduct.code}]]</span></li>

					<li><span class="disc">Trạng thái:</span><span class="disc1">
							[[${inforProduct.quantity > 0?'Còn hàng':'Hết hàng'}]]</span></li>
				</ul>
				<hr>
				<ul class="list-unstyled">
					<li class="product-price"><th:block
							th:if="${inforProduct.sales > 0}">
							<!-- Giá khuyến mãi -->
							<span class="pro_price">[[${#numbers.formatInteger(inforProduct.sales,3,'POINT')}]]₫</span>
							<!-- Giá gốc bị gạch -->
							<span class="pro_oldprice">[[${#numbers.formatInteger(inforProduct.price,3,'POINT')}]]₫</span>
							<!-- Phần trăm giảm giá -->
							<span class="discount-percent">
								-[[${#numbers.formatInteger(((inforProduct.price -
								inforProduct.sales) * 100.0 / inforProduct.price), 0,
								'POINT')}]]% </span>
						</th:block> <th:block th:if="${inforProduct.sales == 0}">
							<!-- Nếu không có giảm giá, chỉ hiển thị giá gốc -->
							<span class="pro_price">[[${#numbers.formatInteger(inforProduct.price,3,'POINT')}]]₫</span>
						</th:block></li>


					<li class="tax">Phí vận chuyển chỉ từ: 30.000đ</li>
					<li>Giao hàng trong vòng 24h</li>
				</ul>
				<hr>
				<div id="product" class="product-options">
					<!-- <h3>Available Options</h3>
				<div class="form-group required ">
					<label class="control-label" for="input-option225">Delivery
						Date</label>
					<div class="input-group date">
						<input type="text" name="option[225]" value="2011-04-22"
							data-date-format="YYYY-MM-DD" id="input-option225"
							class="form-control" /> <span class="input-group-btn">
							<button class="btn btn-default" type="button">
								<i class="fa fa-calendar"></i>
							</button>
						</span>
					</div>
				</div> -->
					<div class="form-group">
						<!-- <label class="control-label qty" for="input-quantity">Số
						lượng</label> -->
						<div class="product-btn-quantity">
							<!-- <div class="minus-plus">
							<button class="minus">
								<i class="fa fa-minus"></i>
							</button>
							<input type="text" name="quantity" value="1" size="2"
								id="input-quantity" class="form-control" />
							<button class="plus">
								<i class="fa fa-plus"></i>
							</button>
						</div> -->
							<div class="btn-groups pro-btns">
								<button type="submit" id="button-cart"
									data-loading-text="Loading..."
									class="btn btn-primary btn-lg btn-block">Thêm vào giỏ</button>
								<button class="pro_wish" id="favorite" type="button"
									th:onclick="addFavorite([(${inforProduct.id})])"
									title="Yêu thích">
									<i class="fa fa-heart"></i>
								</button>
								<button type="button" class="pro_comper" title="So sánh"
									onclick="">
									<i class="fa fa-exchange"></i>
								</button>
							</div>
						</div>
						<input type="hidden" id="productId" th:value="${inforProduct.id}" />
						<div th:if="${inforProduct.quantity < 10}"
							class="alert alert-info">
							<i class="fa fa-info-circle"></i> Chỉ còn tối đa
							[[${inforProduct.quantity}]] sản phẩm
						</div>
					</div>

				</div>
				<hr>
				<!-- AddThis Button BEGIN -->
				<div class="addthis_toolbox addthis_default_style" data-url="">
					<a class="addthis_button_facebook_like"
						fb:like:layout="button_count"></a> <a class="addthis_button_tweet"></a>
					<a class="addthis_button_pinterest_pinit"></a> <a
						class="addthis_counter addthis_pill_style"></a>
				</div>
				<script type="text/javascript"
					src="//s7.addthis.com/js/300/addthis_widget.js#pubid=ra-515eeaf54693130e"></script>
				<!-- AddThis Button END -->
			</div>
		</form>
	</div>
	<div class="col-sm-12">
		<div class="row propage-tab">
			<ul class="nav nav-tabs">
				<li class="active"><a href="#tab-description" data-toggle="tab">Mô
						tả</a></li>
				<li><a href="#tab-specification" data-toggle="tab">Thông
						tin</a></li>
				<li><a href="#tab-review" data-toggle="tab">Đánh giá
						([[${countBookReviews}]])</a></li>
			</ul>
			<div class="tab-content">
				<div class="tab-pane active" id="tab-description">
					<th:block th:utext="${inforProduct.description}"></th:block>
				</div>
				<div class="tab-pane" id="tab-specification">
					<table class="table table-bordered">
						<thead>
							<tr>
								<td colspan="2"><strong>Thông số chi tiết</strong></td>
							</tr>
						</thead>
						<tbody>
							<tr>
								<td>Tác giả:</td>
								<td th:text="${inforProduct.author}">Koyoharu Goutage</td>
							</tr>
							<tr>
								<td>NXB:</td>
								<td th:text="${inforProduct.publisher.name}">Kim Đồng</td>
								<!-- publisher là đối tượng, nên dùng .name để lấy tên -->
							</tr>
							<tr>
								<td>Năm XB:</td>
								<td th:text="${inforProduct.publicationYear}">2024</td>
							</tr>
							<tr>
								<td>Trọng lượng(g):</td>
								<td th:text="${inforProduct.weight}">250</td>
							</tr>
							<tr>
								<td>Kích thước bao bì:</td>
								<td th:text="${inforProduct.dimensions}">19 x 13 cm</td>
							</tr>
							<tr>
								<td>Số trang:</td>
								<td th:text="${inforProduct.pageCount}">204</td>
							</tr>
							<tr>
								<td>Hình thức:</td>
								<td th:text="${inforProduct.format}">Bìa mềm</td>
							</tr>
						</tbody>
					</table>
				</div>


				<div class="tab-pane" id="tab-review">
					<form class="form-horizontal" id="form-review">
						<p id="noComment">Sản phẩm chưa có lượt đánh giá.</p>
						<div id="review">
							<table class="table table-striped table-bordered">
								<tbody ng-repeat="item in pager.items">
									<tr>
										<td style="width: 50%; font-weight: bold !important;">{{item.user.fullname}}</td>
										<td class="text-right">{{item.date | date:'dd/MM/yyyy'}}</td>
									</tr>
									<tr>
										<td colspan="2">
											<p>{{item.content}}</p> <!-- {{starYellow(item.star)}} --> <span
											ng-repeat="i in starYellow(item.star)" class="fa fa-stack"><i
												class="fa fa-star fa-stack-2x"></i><i
												class="fa fa-star-o fa-stack-2x"></i></span><span
											ng-repeat="i in greyYellow(item.star)" class="fa fa-stack"><i
												class="fa fa-star-o fa-stack-2x"></i></span>
										</td>
									</tr>
								</tbody>
							</table>
						</div>

						<th:block th:unless="${#request.remoteUser}">
							<p id="noComment">
								Vui lòng <a th:href="@{/login}">đăng nhập</a> hoặc <a
									th:href="@{/login}">đăng ký</a> để đánh giá.
							</p>
						</th:block>

						<th:block th:if="${#request.remoteUser}">
							<div id="notification" style="display: none;"
								class="alert alert-dismissible">

								<button type="button" class="close" data-dismiss="alert">×</button>
							</div>

							<h2>Viết 1 đánh giá</h2>
							<div class="form-group required">
								<div class="col-sm-2">
									<label class="control-label" for="input-review">Viết
										đánh giá</label>
								</div>
								<div class="col-sm-10">
									<textarea name="text" rows="5" id="input-review"
										class="form-control"></textarea>
								</div>
							</div>
							<div class="form-group required">
								<div class="col-sm-2">
									<label class="control-label">Số sao</label>
								</div>
								<div class="col-sm-10">
									<div class="rating">
										<input type="radio" name="rating" value="1" id="star1"
											onclick="changeColor(1)" style="display: none;" /> <label
											for="star1"
											style="font-size: 30px; color: #ccc; cursor: pointer;">★</label>

										<input type="radio" name="rating" value="2" id="star2"
											onclick="changeColor(2)" style="display: none;" /> <label
											for="star2"
											style="font-size: 30px; color: #ccc; cursor: pointer;">★</label>

										<input type="radio" name="rating" value="3" id="star3"
											onclick="changeColor(3)" style="display: none;" /> <label
											for="star3"
											style="font-size: 30px; color: #ccc; cursor: pointer;">★</label>

										<input type="radio" name="rating" value="4" id="star4"
											onclick="changeColor(4)" style="display: none;" /> <label
											for="star4"
											style="font-size: 30px; color: #ccc; cursor: pointer;">★</label>

										<input type="radio" name="rating" value="5" id="star5"
											onclick="changeColor(5)" style="display: none;" /> <label
											for="star5"
											style="font-size: 30px; color: #ccc; cursor: pointer;">★</label>
									</div>

									<script>
									function changeColor(rating) {
									    let stars = document.querySelectorAll('.rating label');
									    stars.forEach((star, index) => {
									        star.style.color = index < rating ? 'gold' : '#ccc';
									    });
									}

									function resetStars() {
									    let stars = document.querySelectorAll('.rating label');
									    stars.forEach(star => {
									        star.style.color = '#ccc';
									    });
									    document.querySelectorAll('input[name="rating"]').forEach(input => {
									        input.checked = false;
									    });
									}

									// Gọi hàm reset khi nhấn nút đánh giá
									function addComment(productId) {
									    // Giả lập gửi request (thay bằng AJAX nếu cần)
									    console.log("Đánh giá sản phẩm ID:", productId);
									    
									    // Sau khi gửi đánh giá thành công
									    resetStars();
									}

								</script>



								</div>
							</div>
						</th:block>

						<div class="buttons clearfix">
							<div id="pagination" class="pull-left">
								<button type="button" id="button-review" title="Lùi"
									ng-click="pager.prev()" class="btn btn-primary">|<<</button>
								<button type="button" class="btn btn-primary disabled">{{pager.page
									+1}}</button>
								<button type="button" id="button-review" title="Tiếp"
									ng-click="pager.next()" class="btn btn-primary">>>|</button>
							</div>

							<th:block th:if="${#request.remoteUser}">
								<div class="pull-right">
									<button type="button" id="button-review"
										th:onclick="addComment([(${inforProduct.id})])"
										class="btn btn-primary">Đánh giá</button>
								</div>
							</th:block>
						</div>
					</form>
				</div>
			</div>
		</div>
	</div>


	<div th:replace="/user/detail/related_product.html"></div>

</div>
